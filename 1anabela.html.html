<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1" />
<title>Para mi enamorada 游눘</title>
<style>
  :root{
    --bg:#1b1f2e;
    --card:#ffffff;
    --accent:#ff6b9a;
    --soft:#ffd9e6;
  }
  html,body{height:100%;margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;}
  body{
    background: linear-gradient(180deg,#0f1724 0%, #162033 60%, #ffd9e6 100%);
    display:flex;align-items:center;justify-content:center;
  }

  /* contenedor vertical, mobile-first (ideal para TikTok) */
  .stage{
    width:360px; /* m칩vil t칤pico; cambia si quieres */
    height:640px;
    border-radius:20px;
    overflow:hidden;
    box-shadow: 0 10px 30px rgba(0,0,0,.45);
    position:relative;
    background: radial-gradient(circle at 70% 10%, rgba(255,255,255,.06), transparent 15%),
                linear-gradient(180deg, rgba(255,255,255,.03), transparent 40%);
  }

  /* t칤tulo y mensaje */
  .topbar{
    position:absolute;left:0;right:0;top:12px;padding:0 16px;color:white;text-align:center;
    pointer-events:none;
  }
  .title{
    font-size:20px;font-weight:700;text-shadow:0 2px 8px rgba(0,0,0,.6);
  }
  .message{
    margin-top:8px;font-size:16px;opacity:.95;
    transform-origin:center; animation: floatMsg 3s ease-in-out infinite;
  }
  @keyframes floatMsg{
    0%{transform:translateY(0)}
    50%{transform:translateY(-6px)}
    100%{transform:translateY(0)}
  }

  /* 치rea del dibujo */
  canvas#scene{
    display:block;
    width:100%;
    height:100%;
    background:transparent;
  }

  /* boton florecer */
  .controls{
    position:absolute;left:0;right:0;bottom:18px;display:flex;justify-content:center;gap:12px;
  }
  .btn{
    background:linear-gradient(180deg,var(--accent),#ff3b7a);
    border:none;padding:12px 18px;border-radius:999px;color:white;font-weight:700;
    box-shadow:0 6px 18px rgba(255,107,154,.18);
    cursor:pointer; font-size:16px;
  }
  .btn:active{transform:translateY(2px) scale(.995)}
  .small{
    font-size:13px;padding:8px 12px;background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.06);
  }

  /* corazones flotantes sobre la escena en HTML (z-index alto) */
  .heart{
    position:absolute;width:36px;height:36px;pointer-events:none;
    transform-origin:center bottom;
  }
  /* responsive */
  @media(min-width:440px){
    .stage{width:420px;height:740px}
    .title{font-size:22px}
  }
</style>
</head>
<body>
  <div class="stage" id="stage">
    <div class="topbar">
      <div class="title">Para mi Anita Celeste! 游눗</div>
      <div class="message" id="message">Eres todo lo que quiero, te quiero mucho Anita...</div>
    </div>

    <!-- canvas para dibujar 치rbol, suelo, animaciones -->
    <canvas id="scene" width="360" height="640"></canvas>

    <div class="controls">
      <button class="btn" id="bloomBtn">Presioname 游꺚</button>
    </div>
  </div>

<script>
/*
  Escena: dibuja 치rbol, hojas/ramas, corazones que caen y peque침as animaciones.
  Simple, independiente (sin librer칤as externas).
*/

const stage = document.getElementById('stage');
const canvas = document.getElementById('scene');
const ctx = canvas.getContext('2d');

function resizeCanvas(){
  // Mantener resoluci칩n interna consistente para buena calidad
  const rect = stage.getBoundingClientRect();
  canvas.width = Math.round(rect.width * devicePixelRatio);
  canvas.height = Math.round(rect.height * devicePixelRatio);
  canvas.style.width = rect.width + 'px';
  canvas.style.height = rect.height + 'px';
  ctx.setTransform(devicePixelRatio,0,0,devicePixelRatio,0,0);
}
resizeCanvas();
window.addEventListener('resize', resizeCanvas);

// utilidades
function rand(min,max){ return Math.random()*(max-min)+min; }
function choose(a){ return a[Math.floor(Math.random()*a.length)]; }

// part칤culas de corazones
let hearts = [];
class Heart {
  constructor(x,y,size,color,vy,life){
    this.x=x; this.y=y; this.size=size; this.color=color; this.vy=vy; this.life=life;
    this.age=0; this.rot=rand(-0.6,0.6);
  }
  step(dt){
    this.age += dt;
    this.y += this.vy * dt;
    this.x += Math.sin(this.age*3)*0.3;
    this.rot += 0.002;
  }
  draw(ctx){
    const s = this.size;
    ctx.save();
    ctx.translate(this.x,this.y);
    ctx.rotate(this.rot);
    // dibujar coraz칩n como dos c칤rculos y un tri치ngulo suave (path)
    ctx.beginPath();
    ctx.moveTo(0, s*0.35);
    ctx.bezierCurveTo(s*0.6, -s*0.4, s*1.15, s*0.35, 0, s*1.0);
    ctx.bezierCurveTo(-s*1.15, s*0.35, -s*0.6, -s*0.4, 0, s*0.35);
    ctx.closePath();
    ctx.fillStyle = this.color;
    ctx.fill();
    ctx.restore();
  }
}

// floraciones adicionales
function spawnHeart(x,y){
  const c = choose(['#ff6b9a','#ff3b7a','#ff9bbf','#ffd1e6']);
  hearts.push(new Heart(x, y, rand(8,20), c, rand(-0.1,0.3)*40, rand(1.2,3)));
}

// Dibujo del 치rbol (est치tico) pero con ligera animaci칩n
function drawTree(ctx, w, h, t){
  ctx.save();
  // cielo gradiente (ya en CSS), dibujar suelo
  ctx.fillStyle = 'rgba(10,12,14,0.08)';
  ctx.fillRect(0, h*0.75, w, h*0.25);

  // tronco
  const trunkX = w*0.5, trunkY = h*0.75;
  ctx.beginPath();
  ctx.moveTo(trunkX-28, trunkY);
  ctx.bezierCurveTo(trunkX-42, h*0.6, trunkX-22, h*0.45, trunkX-10, h*0.3);
  ctx.lineTo(trunkX-2, h*0.28);
  ctx.lineTo(trunkX+2, h*0.28);
  ctx.lineTo(trunkX+10, h*0.3);
  ctx.bezierCurveTo(trunkX+22, h*0.45, trunkX+42, h*0.6, trunkX+28, trunkY);
  ctx.closePath();
  ctx.fillStyle = '#4b2e1c';
  ctx.fill();

  // ramas (curvas)
  ctx.strokeStyle = '#402615';
  ctx.lineWidth = 6;
  ctx.lineCap = 'round';
  function branch(x1,y1,x2,y2, sway){
    ctx.beginPath();
    ctx.moveTo(x1,y1);
    ctx.quadraticCurveTo((x1+x2)/2 + sway, (y1+y2)/2 - 20 + sway*0.2, x2, y2);
    ctx.stroke();
  }
  const sway = Math.sin(t*0.8)*8;
  branch(trunkX, h*0.4, trunkX-80, h*0.2, -sway);
  branch(trunkX, h*0.45, trunkX+90, h*0.22, sway*0.7);
  branch(trunkX, h*0.5, trunkX-120, h*0.3, -sway*0.5);
  branch(trunkX, h*0.6, trunkX+120, h*0.35, sway*0.3);

  // copas: dibujar varios grupos de corazones como flores
  const centers = [
    [trunkX-80, h*0.2],
    [trunkX+90, h*0.22],
    [trunkX-40, h*0.28],
    [trunkX+30, h*0.18],
    [trunkX+10, h*0.32]
  ];
  centers.forEach((c,i)=>{
    const cx=c[0], cy=c[1];
    const count = 8 + (i%3)*2;
    for(let j=0;j<count;j++){
      const angle = (Math.PI*2)*(j/count) + Math.sin(t*0.8 + i)*0.2;
      const r = 14 + (j%3)*6 + Math.abs(Math.sin(t + j))*6;
      const x = cx + Math.cos(angle)*r + rand(-6,6);
      const y = cy + Math.sin(angle)*r + rand(-6,6);
      // color pulso
      const pulse = 0.9 + 0.12*Math.sin(t*2 + j);
      drawHeart(ctx, x, y, rand(10,20)*pulse, choose(['#ff6b9a','#ff3b7a','#ff9bbf']));
    }
  });

  ctx.restore();
}

// helper para dibujar coraz칩n en canvas
function drawHeart(ctx,x,y,s,color){
  ctx.save();
  ctx.translate(x,y);
  ctx.beginPath();
  ctx.moveTo(0, s*0.35);
  ctx.bezierCurveTo(s*0.6, -s*0.4, s*1.15, s*0.35, 0, s*1.0);
  ctx.bezierCurveTo(-s*1.15, s*0.35, -s*0.6, -s*0.4, 0, s*0.35);
  ctx.closePath();
  ctx.fillStyle = color;
  ctx.fill();
  ctx.restore();
}

// anim loop
let last = performance.now()/1000;
let elapsed = 0;
function loop(now){
  now = now/1000;
  const dt = Math.min(0.06, now - last);
  last = now;
  elapsed += dt;

  const w = canvas.clientWidth;
  const h = canvas.clientHeight;
  ctx.clearRect(0,0,w,h);

  // dibujar 치rbol principal con algo de tiempo
  drawTree(ctx,w,h, elapsed);

  // step hearts
  for(let i = hearts.length-1; i>=0; i--){
    hearts[i].step(dt);
    hearts[i].draw(ctx);
    if(hearts[i].y < -30 || hearts[i].age > hearts[i].life + 1.5){
      hearts.splice(i,1);
    }
  }

  // generar peque침os corazones aleatorios que suben desde el suelo
  if(Math.random() < 0.02) spawnHeart(rand(w*0.1,w*0.9), h*0.72);

  requestAnimationFrame(loop);
}
requestAnimationFrame(loop);

// controles
const bloomBtn = document.getElementById('bloomBtn');
const messageEl = document.getElementById('message');
const toggleText = document.getElementById('toggleText');

bloomBtn.addEventListener('click', ()=>{
  // efecto: generar muchos corazones alrededor de las copas
  const w = canvas.clientWidth;
  const h = canvas.clientHeight;
  for(let i=0;i<26;i++){
    spawnHeart(rand(w*0.25,w*0.75), rand(h*0.08,h*0.4));
  }
  // pulso visual: agranda mensaje brevemente
  messageEl.style.transition = 'transform .18s ease';
  messageEl.style.transform = 'scale(1.08)';
  setTimeout(()=> messageEl.style.transform = '', 180);
  // opcional peque침a vibraci칩n si el dispositivo lo soporta
  if(navigator.vibrate) navigator.vibrate([20,10,20]);
});

// cambiar mensaje (alternar)
let alt = false;
toggleText.addEventListener('click', ()=>{
  alt = !alt;
  messageEl.textContent = alt ? 'Eres mi lugar favorito.' : 'Eres mi sol en d칤as nublados...';
});

// tambi칠n permitir tocar en la pantalla para que caigan corazones
stage.addEventListener('pointerdown', (e)=>{
  const rect = stage.getBoundingClientRect();
  const x = (e.clientX - rect.left);
  const y = (e.clientY - rect.top);
  for(let i=0;i<10;i++){
    spawnHeart(x + rand(-20,20), y + rand(-20,20));
  }
});

</script>
</body>
</html>
